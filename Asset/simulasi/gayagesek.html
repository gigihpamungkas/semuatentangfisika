    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        /* CSS agar Sesuai dengan Template Just the Docs */
        .simulation-wrapper {
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            color: #333;
        }
        #controls {
            background: #fff;
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .control-item { display: flex; flex-direction: column; }
        label { font-size: 11px; font-weight: bold; margin-bottom: 5px; }
        input[type=range] { width: 100%; cursor: pointer; }
        
        #status-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        .card {
            background: #273e51;
            color: white;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }
        .val { display: block; font-size: 18px; color: #f1c40f; font-weight: bold; }
        
        .btn-group {
            grid-column: 1 / -1;
            display: flex;
            gap: 8px;
            margin-top: 5px;
        }
        button {
            flex: 1;
            padding: 10px;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-size: 12px;
        }
        #btnStart { background: #27ae60; }
        #btnPause { background: #f39c12; }
        #btnReset { background: #e74c3c; }
        
        #canvas-container {
            width: 100%;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
        }
    </style>

<div class="simulation-wrapper">
    <div id="controls">
        <div class="control-item">
            <label>Massa (m): <span id="mVal">5</span> kg</label>
            <input type="range" id="mSld" min="1" max="20" value="5" step="1">
        </div>
        <div class="control-item">
            <label>Gaya Tarik (F): <span id="fVal">30</span> N</label>
            <input type="range" id="fSld" min="0" max="100" value="30">
        </div>
        <div class="control-item">
            <label>Sudut Elevasi (θ): <span id="degVal">30</span>°</label>
            <input type="range" id="degSld" min="0" max="89" value="30">
        </div>
        <div class="control-item">
            <label>Koef. Statik (μs): <span id="usVal">0.5</span></label>
            <input type="range" id="usSld" min="0" max="1" value="0.5" step="0.05">
        </div>
        <div class="control-item">
            <label>Koef. Kinetik (μk): <span id="ukVal">0.3</span></label>
            <input type="range" id="ukSld" min="0" max="1" value="0.3" step="0.05">
        </div>
        <div class="btn-group">
            <button id="btnStart" onclick="startSim()">START</button>
            <button id="btnPause" onclick="pauseSim()">PAUSE</button>
            <button id="btnReset" onclick="resetSim()">RESET</button>
        </div>
    </div>

    <div id="canvas-container"></div>

    <div id="status-panel">
        <div class="card">Jarak (s)<span id="distOut" class="val">0.00</span> m</div>
        <div class="card">Kec. (v)<span id="velOut" class="val">0.00</span> m/s</div>
        <div class="card">Acc. (a)<span id="accOut" class="val">0.00</span> m/s²</div>
        <div class="card">Status<span id="stateOut" class="val">DIAM</span></div>
    </div>
</div>

<script>
let x, v, a, simState, startX;
const g = 9.8;
const groundY = 200;
let pixelsPerMeter;

function setup() {
    let container = document.getElementById('canvas-container');
    let w = container.offsetWidth;
    let h = 300;
    let cnv = createCanvas(w, h);
    cnv.parent('canvas-container');
    
    // Sesuaikan skala berdasarkan lebar layar
    pixelsPerMeter = (w - 100) / 20; 
    startX = 40;
    x = startX;
    v = 0;
    a = 0;
    simState = "IDLE";
}

function windowResized() {
    let container = document.getElementById('canvas-container');
    let w = container.offsetWidth;
    resizeCanvas(w, 300);
    pixelsPerMeter = (w - 100) / 20; 
}

function draw() {
    background(255);
    
    let m = parseFloat(document.getElementById('mSld').value);
    let F = parseFloat(document.getElementById('fSld').value);
    let thetaDeg = parseFloat(document.getElementById('degSld').value);
    let us = parseFloat(document.getElementById('usSld').value);
    let uk = parseFloat(document.getElementById('ukSld').value);
    
    document.getElementById('mVal').innerText = m;
    document.getElementById('fVal').innerText = F;
    document.getElementById('degVal').innerText = thetaDeg;
    document.getElementById('usVal').innerText = us;
    document.getElementById('ukVal').innerText = uk;

    let theta = radians(thetaDeg);
    let Fx = F * cos(theta);
    let Fy = F * sin(theta);
    let N = max(0, (m * g) - Fy); 
    let fs_max = us * N;
    let fk = uk * N;

    let posisiRelatifMeter = (x - startX) / pixelsPerMeter;

    if (simState === "RUNNING") {
        if (posisiRelatifMeter >= 20) {
            simState = "IDLE";
            v = 0; a = 0;
            x = startX + (20 * pixelsPerMeter);
            document.getElementById('stateOut').innerText = "FINISH!";
        } else {
            if (v === 0 && Fx <= fs_max) {
                a = 0;
                document.getElementById('stateOut').innerText = "STUCK";
            } else {
                let F_net = Fx - fk;
                a = F_net / m;
                v += a * (1/60);
                if (v < 0) { v = 0; a = 0; }
                x += v;
                document.getElementById('stateOut').innerText = "BERGERAK";
            }
        }
    }

    drawFloor();
    drawBlock(x, groundY, m);
    let sz = 30 + m * 1.5;
    drawForceVector(x + sz, groundY - sz/2, F, theta);
    
    document.getElementById('distOut').innerText = max(0, posisiRelatifMeter).toFixed(2);
    document.getElementById('velOut').innerText = v.toFixed(2);
    document.getElementById('accOut').innerText = a.toFixed(2);
}

function drawFloor() {
    stroke(180); strokeWeight(2);
    line(0, groundY, width, groundY);
    let finishX = startX + (20 * pixelsPerMeter);
    stroke(231, 76, 60); strokeWeight(3);
    line(finishX, groundY - 30, finishX, groundY); 
    fill(231, 76, 60); noStroke(); textSize(10); textAlign(CENTER);
    text("20m", finishX, groundY + 20);
    text("0m", startX, groundY + 20);
}

function drawBlock(bx, by, bm) {
    fill(140); stroke(50); strokeWeight(1);
    let sz = 30 + bm * 1.5;
    rect(bx, by - sz, sz, sz);
    fill(255); textAlign(CENTER, CENTER); noStroke(); textSize(10);
    text(bm + "kg", bx + sz/2, by - sz/2);
}

function drawForceVector(vx, vy, vF, vAngle) {
    if (vF <= 0) return;
    push(); translate(vx, vy); rotate(-vAngle);
    stroke(231, 76, 60); strokeWeight(2);
    let visualLen = vF; 
    line(0, 0, visualLen, 0);
    line(visualLen, 0, visualLen - 5, -3);
    line(visualLen, 0, visualLen - 5, 3);
    pop();
}

function startSim() { simState = "RUNNING"; }
function pauseSim() { simState = "PAUSED"; }
function resetSim() { x = startX; v = 0; a = 0; simState = "IDLE"; document.getElementById('stateOut').innerText = "DIAM"; }
</script>
